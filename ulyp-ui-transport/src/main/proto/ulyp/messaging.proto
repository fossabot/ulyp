syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.ulyp.transport";
option java_outer_classname = "HelloWorldProto";

package ulyp;

service UIConnector {

    rpc RequestSettings(SettingsRequest) returns (SettingsResponse) {}

    rpc UploadCallGraph (TCallTraceLogUploadRequest) returns (TCallTraceLogUploadResponse) {}
}

message SettingsResponse {
    bool mayStartTracing = 1;
    bool shouldTraceIdentityHashCode = 2;
    bool traceCollections = 3;
}

message SettingsRequest {

}

message TMethodInfo {
    int64 id = 1;
    string className = 2;
    string methodName = 3;
    bool returnsSomething = 4;
}

message TCallTraceLog {
    bytes enterTraces = 2;
    bytes exitTraces = 3;
}

message TMethodDescriptionList {
    bytes data = 1;
}

message TClassDescriptionList {
    bytes data = 1;
}

message TCallTraceLogUploadRequest {
    TCallTraceLog traceLog = 1;
    TMethodDescriptionList methodDescriptionList = 2;
    TClassDescriptionList classDescriptionList = 7;
    string mainClassName = 3;
    int64 createEpochMillis = 4;
    int64 lifetimeMillis = 5;
    int64 traceLogId = 6;
}

message TCallTraceLogUploadResponse {

}